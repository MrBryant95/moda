<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.moda.demo.tst.dao.UserDao">
    <select id="get" resultType="com.moda.demo.tst.entity.User">
        SELECT * FROM usr_user WHERE id= #{id}
    </select>
    <select id="listAll" resultType="com.moda.demo.tst.entity.User">
        SELECT * FROM usr_user
    </select>
    <insert id="insert" parameterType="com.moda.demo.tst.entity.User" useGeneratedKeys="true" keyProperty="id">
        INSERT INTO usr_user
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="username != null">
                username,
            </if>
            <if test="name != null">
                name,
            </if>
            <if test="nickname != null">
                nickname,
            </if>
            <if test="mobile != null">
                mobile,
            </if>
            <if test="email != null">
                email,
            </if>
            <if test="password != null">
                password,
            </if>
            <if test="status != null">
                status,
            </if>
            <if test="accessToken != null">
                access_token,
            </if>
            <if test="openId != null">
                open_id,
            </if>
            <if test="regTime != null">
                reg_time,
            </if>
            <if test="payPassword != null">
                pay_password,
            </if>
            <if test="idNo != null">
                id_no,
            </if>
            <if test="idUrl != null">
                id_url,
            </if>
            <if test="authStatus != null">
                auth_status,
            </if>
            <if test="invitationCode != null">
                invitation_code,
            </if>
            <if test="headUrl != null">
                head_url,
            </if>
            <if test="type != null">
                type,
            </if>
            <if test="sex != null">
                sex,
            </if>
            <if test="birthday != null">
                birthday,
            </if>
            <if test="provinceCode != null">
                province_code,
            </if>
            <if test="cityCode != null">
                city_code,
            </if>
            <if test="districtCode != null">
                district_code,
            </if>
            <if test="regionName != null">
                region_name,
            </if>
        </trim>
        <trim prefix="VALUES (" suffix=")" suffixOverrides=",">
            <if test="username != null">
                #{username},
            </if>
            <if test="name != null">
                #{name},
            </if>
            <if test="nickname != null">
                #{nickname},
            </if>
            <if test="mobile != null">
                #{mobile},
            </if>
            <if test="email != null">
                #{email},
            </if>
            <if test="password != null">
                #{password},
            </if>
            <if test="status != null">
                #{status},
            </if>
            <if test="accessToken != null">
                #{accessToken},
            </if>
            <if test="openId != null">
                #{openId},
            </if>
            <if test="regTime != null">
                #{regTime},
            </if>
            <if test="payPassword != null">
                #{payPassword},
            </if>
            <if test="idNo != null">
                #{idNo},
            </if>
            <if test="idUrl != null">
                #{idUrl},
            </if>
            <if test="authStatus != null">
                #{authStatus},
            </if>
            <if test="invitationCode != null">
                #{invitationCode},
            </if>
            <if test="headUrl != null">
                #{headUrl},
            </if>
            <if test="type != null">
                #{type},
            </if>
            <if test="sex != null">
                #{sex},
            </if>
            <if test="birthday != null">
                #{birthday},
            </if>
            <if test="provinceCode != null">
                #{provinceCode},
            </if>
            <if test="cityCode != null">
                #{cityCode},
            </if>
            <if test="districtCode != null">
                #{districtCode},
            </if>
            <if test="regionName != null">
                #{regionName},
            </if>
        </trim>
    </insert>
    <update id="delete">
        DELETE FROM usr_user WHERE id = #{id}
    </update>
    <update id="update" parameterType="com.moda.demo.tst.entity.User">
        UPDATE usr_user
        <set>
            <if test="username != null">
                username = #{username},
            </if>
            <if test="name != null">
                name = #{name},
            </if>
            <if test="nickname != null">
                nickname = #{nickname},
            </if>
            <if test="mobile != null">
                mobile = #{mobile},
            </if>
            <if test="email != null">
                email = #{email},
            </if>
            <if test="password != null">
                password = #{password},
            </if>
            <if test="status != null">
                status = #{status},
            </if>
            <if test="accessToken != null">
                access_token = #{accessToken},
            </if>
            <if test="openId != null">
                open_id = #{openId},
            </if>
            <if test="regTime != null">
                reg_time = #{regTime},
            </if>
            <if test="payPassword != null">
                pay_password = #{payPassword},
            </if>
            <if test="idNo != null">
                id_no = #{idNo},
            </if>
            <if test="idUrl != null">
                id_url = #{idUrl},
            </if>
            <if test="authStatus != null">
                auth_status = #{authStatus},
            </if>
            <if test="invitationCode != null">
                invitation_code = #{invitationCode},
            </if>
            <if test="headUrl != null">
                head_url = #{headUrl},
            </if>
            <if test="type != null">
                type = #{type},
            </if>
            <if test="sex != null">
                sex = #{sex},
            </if>
            <if test="birthday != null">
                birthday = #{birthday},
            </if>
            <if test="provinceCode != null">
                province_code = #{provinceCode},
            </if>
            <if test="cityCode != null">
                city_code = #{cityCode},
            </if>
            <if test="districtCode != null">
                district_code = #{districtCode},
            </if>
            <if test="regionName != null">
                region_name = #{regionName},
            </if>
        </set>
        WHERE id = #{id}
    </update>
    <insert id="insertBatch" parameterType="com.moda.demo.tst.entity.User">
        INSERT INTO usr_user (
        username,
        name,
        nickname,
        mobile,
        email,
        password,
        status,
        access_token,
        open_id,
        reg_time,
        pay_password,
        id_no,
        id_url,
        auth_status,
        invitation_code,
        head_url,
        type,
        sex,
        birthday,
        province_code,
        city_code,
        district_code,
        region_name
        )
        VALUES
        <foreach collection="list" item="item" separator=",">
            (
            #{item.username},
            #{item.name},
            #{item.nickname},
            #{item.mobile},
            #{item.email},
            #{item.password},
            #{item.status},
            #{item.accessToken},
            #{item.openId},
            #{item.regTime},
            #{item.payPassword},
            #{item.idNo},
            #{item.idUrl},
            #{item.authStatus},
            #{item.invitationCode},
            #{item.headUrl},
            #{item.type},
            #{item.sex},
            #{item.birthday},
            #{item.provinceCode},
            #{item.cityCode},
            #{item.districtCode},
            #{item.regionName}
            )
        </foreach>
    </insert>
    <sql id="whereCondition">
        <where>
            <if test="id != null">
                AND id = #{id}
            </if>
            <if test="username != null">
                AND username = #{username}
            </if>
            <if test="name != null">
                AND name = #{name}
            </if>
            <if test="nickname != null">
                AND nickname = #{nickname}
            </if>
            <if test="mobile != null">
                AND mobile = #{mobile}
            </if>
            <if test="email != null">
                AND email = #{email}
            </if>
            <if test="password != null">
                AND password = #{password}
            </if>
            <if test="status != null">
                AND status = #{status}
            </if>
            <if test="accessToken != null">
                AND access_token = #{accessToken}
            </if>
            <if test="openId != null">
                AND open_id = #{openId}
            </if>
            <if test="regTime != null">
                AND reg_time = #{regTime}
            </if>
            <if test="payPassword != null">
                AND pay_password = #{payPassword}
            </if>
            <if test="idNo != null">
                AND id_no = #{idNo}
            </if>
            <if test="idUrl != null">
                AND id_url = #{idUrl}
            </if>
            <if test="authStatus != null">
                AND auth_status = #{authStatus}
            </if>
            <if test="invitationCode != null">
                AND invitation_code = #{invitationCode}
            </if>
            <if test="headUrl != null">
                AND head_url = #{headUrl}
            </if>
            <if test="type != null">
                AND type = #{type}
            </if>
            <if test="sex != null">
                AND sex = #{sex}
            </if>
            <if test="birthday != null">
                AND birthday = #{birthday}
            </if>
            <if test="provinceCode != null">
                AND province_code = #{provinceCode}
            </if>
            <if test="cityCode != null">
                AND city_code = #{cityCode}
            </if>
            <if test="districtCode != null">
                AND district_code = #{districtCode}
            </if>
            <if test="regionName != null">
                AND region_name = #{regionName}
            </if>
        </where>
    </sql>
    <select id="getByCondition" parameterType="com.moda.demo.tst.entity.User"
            resultType="com.moda.demo.tst.entity.User">
        SELECT * FROM usr_user
        <include refid="whereCondition"/>
        LIMIT 1
    </select>
    <select id="listByCondition" parameterType="com.moda.demo.tst.entity.User"
            resultType="com.moda.demo.tst.entity.User">
        SELECT * FROM usr_user
        <include refid="whereCondition"/>
    </select>
    <select id="getSimple" resultType="com.moda.demo.tst.response.UserGetSimpleResponse">
        SELECT id,nickname,mobile FROM usr_user WHERE id = #{id}
    </select>
</mapper>